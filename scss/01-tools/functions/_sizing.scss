////
/// @group sizing
////

@use 'sass:math';

/// Validate a sizing map
///
/// @param {Map} $map - Map to test
/// @return {Boolean} - True if the parameter is a map with a `min` key
@function is-sizing-map($map) {
  @return (type-of($map) == 'map' and map-has-key($map, 'min') and length($map) < 3);
}

/// Get largest sizing of sizing map
///
/// @param {Map|Number} $sizing - Sizing map or number
/// @return {Number} - Largest sizing in the map
@function get-largest-sizing($sizing) {
  @if (type-of($sizing) == 'map') {
    $sizing: nth(map-values($sizing), length($sizing));

    @if is-sizing-map($sizing) {
      $sizing: map-get($sizing, 'max');

      @if not $sizing {
        $sizing: map-get($sizing, 'min');
      }
    }
  }

  @return $sizing;
}

/// Half values of a sizing map
///
/// @param {Map|Number} $sizing - Sizing map or number
/// @return {Map|Number} - Sizing map with halved values or halved number
@function get-half-sizing($sizing) {
  $half-sizing: $sizing;

  @if is-sizing-map($sizing) {
    $half-sizing: (
      'min': math.div(map-get($sizing, 'min'), 2),
    );

    @if map-has-key($sizing, 'max') {
      $half-sizing: map-merge(
        $half-sizing,
        (
          'max': math.div(map-get($sizing, 'max'), 2),
        )
      );
    }
  } @else {
    $half-sizing: math.div($sizing, 2);
  }

  @return $half-sizing;
}
